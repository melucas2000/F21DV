<!-- Source: F21DV
     Author: Melanie Lucas
     Date: 23/01/2022 -->

<body></body>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
  // Set Dimensions
  const xSize = 600;
  const ySize = 600;
  const margin = 40;
  const xMax = xSize - margin * 2;
  const yMax = ySize - margin * 2;

  // function to specify line type
  function lineType(type, data) {
    if (type == "sin") return Math.sin(data);
    if (type == "cos") return Math.cos(data);
    return Math.tanh(data);
  }

  // specify the number of data points
  const numPoints = 100;

  // create random points for each line
  const line1 = [];
  const line2 = [];
  for (let i = 0; i < numPoints; i++) {
    line1.push({ x: i / 100, y: lineType("sin", (6.2 * i) / 100) });
    line2.push({ x: i / 100, y: lineType("cos", (6.2 * i) / 100) });
  }

  // define variable containing both line data with array spreading
  const bothLines = [...line1, ...line2];

  // Get the 'limits' of the data - the full extent (mins and max)
  // so the plotted data fits perfectly
  const xExtent = d3.extent(bothLines, (d) => {
    return d.x;
  });

  const yExtent = d3.extent(bothLines, (d) => {
    return d.y;
  });

  // Append SVG Object to the Page
  const svg = d3
    .select("body")
    .append("svg")
    .attr("width", xSize)
    .attr("height", ySize)
    .append("g")
    .attr("transform", "translate(" + margin + "," + margin + ")");

  // X Axis
  const x = d3.scaleLinear().domain([xExtent[0], xExtent[1]]).range([0, xMax]);
  // bottom
  svg
    .append("g")
    .attr("transform", "translate(0," + yMax + ")")
    .call(d3.axisBottom(x))
    .attr("color", "green"); // make bottom axis green
  // top
  svg.append("g").call(d3.axisTop(x));
  // Y Axis
  const y = d3.scaleLinear().domain([yExtent[0], yExtent[1]]).range([yMax, 0]);
  // left y axis
  svg.append("g").call(d3.axisLeft(y));
  // right y axis
  svg
    .append("g")
    .attr("transform", `translate(${yMax},0)`)
    .call(d3.axisRight(y));

  // function to draw either circle or triangle according to data points
  function drawShape(lineData, shape) {
    if (shape == "circle") {
      svg
        .selectAll("dot")
        .data(lineData)
        .enter()
        .append(shape)
        // position the circle using x and y data points
        .attr("cx", function (d) {
          return x(d.x);
        })
        .attr("cy", function (d) {
          return y(d.y);
        })
        .attr("r", 5)
        .style("fill", "red");
    } else {
      // secifys triangle symbol
      var sym = d3.symbol().type(d3.symbolTriangle).size(30);
      svg
        .selectAll("dot")
        .data(lineData)
        .enter()
        .append("path")
        .attr("d", sym)
        .attr("fill", "green")
        .attr("stroke", "green")
        // position the triangles using x and y data points
        .attr("transform", function (d) {
          return "translate(" + x(d.x) + "," + y(d.y) + ")";
        });
    }
  }

  // function to draw line, takes in the line data and the line colour
  function drawLine(lineData, color) {
    return svg
      .append("path")
      .datum(lineData)
      .attr("fill", "none")
      .attr("stroke", color)
      .attr("stroke-width", 1.5)
      .attr(
        "d",
        d3
          .line()
          .x(function (d) {
            return x(d.x);
          })
          .y(function (d) {
            return y(d.y);
          })
      );
  }

  // Add the line
  drawLine(line1, "green");
  drawLine(line2, "blue");
  // add the shapes
  drawShape(line1, "circle");
  drawShape(line2, "triangle");
</script>
